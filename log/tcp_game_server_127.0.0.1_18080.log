2019-09-14 03:35:15+0800 [-] Log opened.
2019-09-14 03:35:15+0800 [-] CommonServer starting on 18080
2019-09-14 03:35:15+0800 [-] Starting factory <im.common.common_server.CommonServer object at 0x00000225D0E5BE48>
2019-09-14 03:35:20+0800 [-] [onConnect] http://127.0.0.1:18080: {"peer": "tcp4:127.0.0.1:51214", "headers": {"upgrade": "websocket", "connection": "Upgrade", "host": "127.0.0.1:18080", "origin": "http://127.0.0.1:18080", "sec-websocket-key": "hGiHLNHBL7QD5SH2KzBn4g==", "sec-websocket-version": "13", "token": "123456"}, "host": "127.0.0.1", "path": "/", "params": {}, "version": 13, "origin": "http://127.0.0.1:18080", "protocols": [], "extensions": []}
2019-09-14 03:35:20+0800 [-] client[tcp4:127.0.0.1:51214] hash[171522081644797406] try connecting.
2019-09-14 03:35:20+0800 [-] {"peer": "tcp4:127.0.0.1:51214", "headers": {"upgrade": "websocket", "connection": "Upgrade", "host": "127.0.0.1:18080", "origin": "http://127.0.0.1:18080", "sec-websocket-key": "hGiHLNHBL7QD5SH2KzBn4g==", "sec-websocket-version": "13", "token": "123456"}, "host": "127.0.0.1", "path": "/", "params": {}, "version": 13, "origin": "http://127.0.0.1:18080", "protocols": [], "extensions": []}
2019-09-14 03:35:20+0800 [-] client[tcp4:127.0.0.1:51214] handshake finished.
2019-09-14 03:35:20+0800 [-] <Task pending coro=<TcpServerHandle.onCheck() running at G:\imServer\server\ImServer\im\player\tcpHandlers.py:189>>
2019-09-14 03:35:20+0800 [-] peer onCheck 1568403320474
2019-09-14 03:35:26+0800 [-] <Task pending coro=<TcpServerHandle.onCheck() running at G:\imServer\server\ImServer\im\player\tcpHandlers.py:189>>
2019-09-14 03:35:26+0800 [-] peer onCheck 1568403326475
2019-09-14 03:35:31+0800 [-] <Task pending coro=<TcpServerHandle.onCheck() running at G:\imServer\server\ImServer\im\player\tcpHandlers.py:189>>
2019-09-14 03:35:31+0800 [-] peer onCheck 1568403331675
2019-09-14 03:35:36+0800 [-] <Task pending coro=<TcpServerHandle.onCheck() running at G:\imServer\server\ImServer\im\player\tcpHandlers.py:189>>
2019-09-14 03:35:36+0800 [-] peer onCheck 1568403336875
2019-09-14 03:35:42+0800 [-] <Task pending coro=<TcpServerHandle.onCheck() running at G:\imServer\server\ImServer\im\player\tcpHandlers.py:189>>
2019-09-14 03:35:42+0800 [-] peer onCheck 1568403342074
2019-09-14 03:35:47+0800 [-] <Task pending coro=<TcpServerHandle.onCheck() running at G:\imServer\server\ImServer\im\player\tcpHandlers.py:189>>
2019-09-14 03:35:47+0800 [-] peer onCheck 1568403347274
2019-09-14 03:35:52+0800 [-] <Task pending coro=<TcpServerHandle.onCheck() running at G:\imServer\server\ImServer\im\player\tcpHandlers.py:189>>
2019-09-14 03:35:52+0800 [-] peer onCheck 1568403352475
2019-09-14 03:35:57+0800 [-] <Task pending coro=<TcpServerHandle.onCheck() running at G:\imServer\server\ImServer\im\player\tcpHandlers.py:189>>
2019-09-14 03:35:57+0800 [-] peer onCheck 1568403357674
2019-09-14 03:36:02+0800 [-] <Task pending coro=<TcpServerHandle.onCheck() running at G:\imServer\server\ImServer\im\player\tcpHandlers.py:189>>
2019-09-14 03:36:02+0800 [-] peer onCheck 1568403362675
2019-09-14 03:36:07+0800 [-] <Task pending coro=<TcpServerHandle.onCheck() running at G:\imServer\server\ImServer\im\player\tcpHandlers.py:189>>
2019-09-14 03:36:07+0800 [-] peer onCheck 1568403367874
2019-09-14 03:36:12+0800 [-] <Task pending coro=<TcpServerHandle.onCheck() running at G:\imServer\server\ImServer\im\player\tcpHandlers.py:189>>
2019-09-14 03:36:12+0800 [-] peer onCheck 1568403372875
2019-09-14 03:36:17+0800 [-] Log opened.
2019-09-14 03:36:18+0800 [-] CommonServer starting on 18080
2019-09-14 03:36:18+0800 [-] Starting factory <im.common.common_server.CommonServer object at 0x00000164FF14BC88>
2019-09-14 03:36:20+0800 [-] [onConnect] http://127.0.0.1:18080: {"peer": "tcp4:127.0.0.1:51272", "headers": {"upgrade": "websocket", "connection": "Upgrade", "host": "127.0.0.1:18080", "origin": "http://127.0.0.1:18080", "sec-websocket-key": "h29WqxZVRb88l8GK5KnhCw==", "sec-websocket-version": "13", "token": "123456"}, "host": "127.0.0.1", "path": "/", "params": {}, "version": 13, "origin": "http://127.0.0.1:18080", "protocols": [], "extensions": []}
2019-09-14 03:36:20+0800 [-] client[tcp4:127.0.0.1:51272] hash[7770419063661096133] try connecting.
2019-09-14 03:36:20+0800 [-] {"peer": "tcp4:127.0.0.1:51272", "headers": {"upgrade": "websocket", "connection": "Upgrade", "host": "127.0.0.1:18080", "origin": "http://127.0.0.1:18080", "sec-websocket-key": "h29WqxZVRb88l8GK5KnhCw==", "sec-websocket-version": "13", "token": "123456"}, "host": "127.0.0.1", "path": "/", "params": {}, "version": 13, "origin": "http://127.0.0.1:18080", "protocols": [], "extensions": []}
2019-09-14 03:36:20+0800 [-] client[tcp4:127.0.0.1:51272] handshake finished.
2019-09-14 03:36:23+0800 [-] <Task pending coro=<TcpServerHandle.onCheck() running at G:\imServer\server\ImServer\im\player\tcpHandlers.py:189>>
2019-09-14 03:36:23+0800 [-] peer onCheck 1568403383629
2019-09-14 03:36:23+0800 [-] G:\imServer\server\ImServer\im\player\tcpHandlers.py:191: builtins.RuntimeWarning: coroutine 'Peer.onCheck' was never awaited
2019-09-14 03:36:23+0800 [-] peer onCheck result
2019-09-14 03:36:28+0800 [-] <Task pending coro=<TcpServerHandle.onCheck() running at G:\imServer\server\ImServer\im\player\tcpHandlers.py:189>>
2019-09-14 03:36:28+0800 [-] peer onCheck 1568403388828
2019-09-14 03:36:28+0800 [-] peer onCheck result
2019-09-14 03:36:34+0800 [-] <Task pending coro=<TcpServerHandle.onCheck() running at G:\imServer\server\ImServer\im\player\tcpHandlers.py:189>>
2019-09-14 03:36:34+0800 [-] peer onCheck 1568403394028
2019-09-14 03:36:34+0800 [-] peer onCheck result
2019-09-14 03:36:39+0800 [-] <Task pending coro=<TcpServerHandle.onCheck() running at G:\imServer\server\ImServer\im\player\tcpHandlers.py:189>>
2019-09-14 03:36:39+0800 [-] peer onCheck 1568403399228
2019-09-14 03:36:39+0800 [-] peer onCheck result
2019-09-14 03:36:44+0800 [-] <Task pending coro=<TcpServerHandle.onCheck() running at G:\imServer\server\ImServer\im\player\tcpHandlers.py:189>>
2019-09-14 03:36:44+0800 [-] peer onCheck 1568403404428
2019-09-14 03:36:44+0800 [-] peer onCheck result
2019-09-14 03:36:49+0800 [-] <Task pending coro=<TcpServerHandle.onCheck() running at G:\imServer\server\ImServer\im\player\tcpHandlers.py:189>>
2019-09-14 03:36:49+0800 [-] peer onCheck 1568403409628
2019-09-14 03:36:49+0800 [-] peer onCheck result
2019-09-14 03:36:54+0800 [-] <Task pending coro=<TcpServerHandle.onCheck() running at G:\imServer\server\ImServer\im\player\tcpHandlers.py:189>>
2019-09-14 03:36:54+0800 [-] peer onCheck 1568403414828
2019-09-14 03:36:54+0800 [-] peer onCheck result
2019-09-14 03:37:00+0800 [-] <Task pending coro=<TcpServerHandle.onCheck() running at G:\imServer\server\ImServer\im\player\tcpHandlers.py:189>>
2019-09-14 03:37:00+0800 [-] peer onCheck 1568403420028
2019-09-14 03:37:00+0800 [-] peer onCheck result
2019-09-14 03:37:06+0800 [-] [Failure instance: Traceback (failure with no frames): <class 'twisted.internet.error.ConnectionDone'>: Connection was closed cleanly: Connection done.
2019-09-14 03:37:06+0800 [-] ], 400, [Failure instance: Traceback (failure with no frames): <class 'twisted.internet.error.ConnectionDone'>: Connection was closed cleanly: Connection done.
2019-09-14 03:37:06+0800 [-] ]
2019-09-14 03:37:06+0800 [-] client[tcp4:127.0.0.1:51272] disconnected reason[[Failure instance: Traceback (failure with no frames): <class 'twisted.internet.error.ConnectionDone'>: Connection was closed cleanly: Connection done.
2019-09-14 03:37:06+0800 [-] ]]
2019-09-14 03:37:06+0800 [TcpServerHandle,0,127.0.0.1] Unhandled Error
	Traceback (most recent call last):
	  File "E:\Program Files\Python37\lib\site-packages\twisted\python\log.py", line 103, in callWithLogger
	    return callWithContext({"system": lp}, func, *args, **kw)
	  File "E:\Program Files\Python37\lib\site-packages\twisted\python\log.py", line 86, in callWithContext
	    return context.call({ILogContext: newCtx}, func, *args, **kw)
	  File "E:\Program Files\Python37\lib\site-packages\twisted\python\context.py", line 122, in callWithContext
	    return self.currentContext().callWithContext(ctx, func, *args, **kw)
	  File "E:\Program Files\Python37\lib\site-packages\twisted\python\context.py", line 85, in callWithContext
	    return func(*args,**kw)
	--- <exception caught here> ---
	  File "E:\Program Files\Python37\lib\site-packages\twisted\internet\iocpreactor\reactor.py", line 119, in _callEventCallback
	    evt.callback(rc, numBytes, evt)
	  File "E:\Program Files\Python37\lib\site-packages\twisted\internet\iocpreactor\abstract.py", line 192, in _cbWrite
	    if self._handleWrite(rc, numBytesWritten, evt):
	  File "E:\Program Files\Python37\lib\site-packages\twisted\internet\iocpreactor\abstract.py", line 226, in _handleWrite
	    self.connectionLost(failure.Failure(main.CONNECTION_DONE))
	  File "E:\Program Files\Python37\lib\site-packages\twisted\internet\iocpreactor\tcp.py", line 131, in connectionLost
	    protocol.connectionLost(reason)
	  File "G:\imServer\server\ImServer\im\common\peer.py", line 91, in connectionLost
	    self.onClose(reason, 400, reason)
	  File "G:\imServer\server\ImServer\im\common\peer.py", line 145, in onClose
	    self.factory.removePeer(self)
	  File "G:\imServer\server\ImServer\im\common\common_server.py", line 37, in removePeer
	    super(CommonServer, self).removePeer(peer)
	  File "G:\imServer\server\ImServer\im\common\server.py", line 88, in removePeer
	    assert peer.hashKey in self.peers, "Peer[%s] is not existed."%(peer.descTxt)
	builtins.AssertionError: Peer[tcp4:127.0.0.1:51272] is not existed.
	
